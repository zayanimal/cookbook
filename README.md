# Cookbook - Инженерные системы дома

Веб-приложение для ведения документации по инженерным системам дома, похожее на Confluence.

## Технологии

- **React JS** - UI библиотека
- **MobX** - Управление состоянием
- **Material UI** - Компоненты интерфейса
- **Emotion JS** - Стилизация компонентов
- **EditorJS** - Редактор контента
- **Axios** - HTTP клиент для REST API запросов
- **REST API** - Слой сервисов для работы с бэкендом
- **Моки JSON** - Тестовые данные для разработки

## Функциональность

- ✅ Создание и управление разделами
- ✅ Создание и редактирование страниц в разделах
- ✅ Богатый текстовый редактор (EditorJS) с поддержкой:
  - Заголовков
  - Параграфов
  - Списков
  - Кода
  - Цитат
  - Таблиц
  - Ссылок
  - Изображений
- ✅ Адаптивный дизайн для desktop и мобильных устройств
- ✅ REST API сервисы для работы с бэкендом
- ✅ Моки JSON для разработки без бэкенда
- ✅ Обработка ошибок и индикаторы загрузки

## Установка

```bash
npm install
```

## Запуск

```bash
npm run dev
```

Приложение будет доступно по адресу http://localhost:3000

## Сборка

```bash
npm run build
```

## Структура проекта

```
src/
  ├── components/      # React компоненты
  │   ├── MainLayout.jsx
  │   ├── Sidebar.jsx
  │   ├── PageView.jsx
  │   └── EmptyState.jsx
  ├── stores/          # MobX stores
  │   └── cookbookStore.js
  ├── services/        # REST API сервисы
  │   ├── api.js           # Базовый API клиент
  │   ├── mocks.js         # Моки данных
  │   ├── sectionsService.js
  │   └── pagesService.js
  ├── hooks/           # React hooks
  │   └── useStores.js
  ├── App.jsx
  └── main.jsx
mocks/                 # JSON моки для API
  └── sections.json
```

## API и Моки

Проект использует слой сервисов для работы с REST API. По умолчанию используются моки JSON для разработки без бэкенда.

### Настройка API

Создайте файл `.env` в корне проекта:

```bash
# Использовать моки (по умолчанию)
VITE_USE_MOCKS=true
VITE_API_BASE_URL=/api

# Или подключить реальный бэкенд
VITE_USE_MOCKS=false
VITE_API_BASE_URL=http://localhost:8000/api
```

**Важно:** В Vite переменные окружения должны начинаться с префикса `VITE_` и доступны через `import.meta.env` в коде.

### Структура API

#### Разделы (Sections)
- `GET /api/sections` - Получить все разделы
- `GET /api/sections/:id` - Получить раздел по ID
- `POST /api/sections` - Создать раздел
- `PUT /api/sections/:id` - Обновить раздел
- `DELETE /api/sections/:id` - Удалить раздел

#### Страницы (Pages)
- `GET /api/sections/:id/pages` - Получить все страницы раздела
- `GET /api/sections/:id/pages/:pageId` - Получить страницу по ID
- `POST /api/sections/:id/pages` - Создать страницу
- `PUT /api/sections/:id/pages/:pageId` - Обновить страницу
- `DELETE /api/sections/:id/pages/:pageId` - Удалить страницу

### Моки

Моки находятся в папке `mocks/` и используются автоматически при `VITE_USE_MOCKS=true`. Формат ответа:

```json
{
  "data": [...],
  "success": true
}
```

## Использование

1. **Создание раздела**: Нажмите кнопку "Добавить раздел" в нижней части боковой панели
2. **Создание страницы**: Выберите раздел и нажмите "Добавить страницу" в меню раздела
3. **Редактирование**: Нажмите на страницу для просмотра и редактирования
4. **Сохранение**: Используйте кнопку сохранения в панели инструментов страницы

## Предустановленные разделы

При первом запуске создаются следующие разделы:
- Отопление
- Подготовка воды
- Канализация
- Системы фильтрации
- Локальная сеть
- Видеонаблюдение
- Охранная система
- Вентиляция

